
# ğŸ“„ äº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆPRD)

## é¡¹ç›®åç§°ï¼šè·¨å¹³å°å­¦ä¹ ä¸æµ‹è¯•ç¯å¢ƒé…ç½®åŒæ­¥å·¥å…·

> é€šè¿‡ Terraform + Vagrant + Kind å¿«é€Ÿæ­å»ºæœ¬åœ°ä¸äº‘ç«¯ Kubernetes å­¦ä¹ ç¯å¢ƒï¼Œæ”¯æŒé…ç½®åŒæ­¥ä¸ä»£ç åŒ–ç®¡ç†

---

## ä¸€ã€äº§å“æ¦‚è¿°

**äº§å“ç›®æ ‡**ï¼š
ä¸ºå­¦ä¹  Kubernetesã€äº‘åŸç”Ÿä¸åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰ç›¸å…³çŸ¥è¯†çš„ç”¨æˆ·ï¼Œæä¾›ä¸€ä¸ªè·¨å¹³å°ã€è‡ªåŠ¨åŒ–ã€é…ç½®å¯å¤ç”¨çš„æœ¬åœ°+äº‘ç«¯å®éªŒç¯å¢ƒè§£å†³æ–¹æ¡ˆï¼Œé™ä½ç¯å¢ƒæ­å»ºé—¨æ§›ï¼ŒåŠ å¿«å­¦ä¹ ä¸æµ‹è¯•æ•ˆç‡ã€‚

**æ ¸å¿ƒä»·å€¼**ï¼š

* ä¸€é”®éƒ¨ç½² Kubernetes æœ¬åœ°ç¯å¢ƒ
* æ‰€æœ‰é…ç½®é€šè¿‡ GitHub ç®¡ç†ä¸åŒæ­¥
* è·¨å¹³å°æ”¯æŒï¼ˆmacOSã€Linuxã€Windows/WSLï¼‰
* äº‘ç«¯ç¯å¢ƒæ”¯æŒï¼ˆAzure è™šæ‹Ÿæœºã€é˜¿é‡Œäº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼‰
* é€æ­¥æ‹“å±•å®éªŒæ¨¡å—ï¼Œé€‚åº”åˆå­¦åˆ°ä¸­é«˜çº§é˜¶æ®µå­¦ä¹ 

---

## äºŒã€ç›®æ ‡ç”¨æˆ·

| ç”¨æˆ·ç±»å‹       | å…¸å‹ç‰¹å¾                   | ä¸»è¦è¯‰æ±‚                     |
| ---------- | ---------------------- | ------------------------ |
| å­¦ç”Ÿ / è‡ªå­¦è€…   | å­¦ä¹  Kubernetes ä¸ IaC åˆæœŸ | å¿«é€Ÿæ­å»ºæœ¬åœ°å®éªŒç¯å¢ƒï¼Œé¿å…ç¯å¢ƒé—®é¢˜å½±å“å­¦ä¹     |
| DevOps å·¥ç¨‹å¸ˆ | æ¸è¿›å¼æŒæ¡å·¥å…·é“¾ä¸è‡ªåŠ¨åŒ–           | åœ¨æœ¬åœ°ä¸äº‘ä¸Šéƒ¨ç½²æµ‹è¯•ç¯å¢ƒï¼Œç»ƒä¹ é…ç½®ä¸€è‡´æ€§     |
| æ•™è‚²æœºæ„       | æä¾›è¯¾ç¨‹å®éªŒå¹³å°               | ç¯å¢ƒä¸€è‡´ã€éƒ¨ç½²ç®€å•ã€å¯ç»Ÿä¸€äº¤ä»˜          |
| å†…éƒ¨ç ”å‘å›¢é˜Ÿ     | å°è§„æ¨¡é›†æˆä¸æµ‹è¯•               | ä½¿ç”¨ IaC ç®¡ç†æµ‹è¯•ç¯å¢ƒï¼Œæ”¯æŒå¤šäººåä½œå…±äº«é…ç½® |

---

## ä¸‰ã€äº§å“ç›®æ ‡ä¸æ„¿æ™¯

| ç›®æ ‡               | æè¿°                                                              |
| ---------------- | --------------------------------------------------------------- |
| âœ… æœ¬åœ°ç¯å¢ƒå³ä»£ç ï¼ˆIaCï¼‰ç®¡ç† | ä½¿ç”¨ Terraform + Vagrant/Kind ç®¡ç†æ‰€æœ‰åŸºç¡€è®¾æ–½èµ„æº                          |
| âœ… é…ç½®æ–‡ä»¶ç»Ÿä¸€åŒ–        | ä½¿ç”¨ GitHub ç®¡ç† `.tf`, `.yaml`, `.sh`, `.bashrc`, `.vimrc` ç­‰ç¯å¢ƒé…ç½®æ–‡ä»¶ |
| âœ… å¤šå¹³å°å…¼å®¹          | æ— è®ºåœ¨ macOSã€Linux è¿˜æ˜¯ Windows/WSLï¼Œå‡å¯ç»Ÿä¸€éƒ¨ç½²æµç¨‹                         |
| âœ… å®éªŒæ¨¡å—å¯æ‰©å±•        | æ”¯æŒä»å•èŠ‚ç‚¹ K8s åˆ°å¤šèŠ‚ç‚¹é›†ç¾¤ã€äº‘å¹³å°å¯¹æ¥ã€CI/CD ç­‰è¿›é˜¶å®è·µ                             |
| âœ… äº‘å¹³å°å¿«é€Ÿåˆ›å»ºæµ‹è¯•æœº     | æ”¯æŒ Azureã€é˜¿é‡Œäº‘ç­‰å…¬æœ‰äº‘å¹³å°åˆ›å»ºè™šæ‹Ÿæµ‹è¯•ä¸»æœºï¼Œæ„å»ºæ··åˆå­¦ä¹ ç¯å¢ƒ                             |

---

## å››ã€ç”¨æˆ·æ•…äº‹ä¸å…¸å‹åœºæ™¯

### ğŸ“ å­¦ä¹ è€…ï¼ˆåˆçº§ï¼‰

> â€œæˆ‘åœ¨å­¦ä¹  Kubernetesï¼Œå¸Œæœ›å¿«é€Ÿæ­å»ºä¸€ä¸ªå•èŠ‚ç‚¹ç¯å¢ƒè¿›è¡Œå®æˆ˜æµ‹è¯•ï¼Œå¹¶é€šè¿‡ GitHub ç®¡ç†æˆ‘çš„é…ç½®ã€‚â€

### ğŸ§ª å®è·µè€…ï¼ˆä¸­çº§ï¼‰

> â€œæˆ‘å·²ç»ç†Ÿæ‚‰ K8s éƒ¨ç½²æµç¨‹ï¼Œæƒ³è¦æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒï¼Œæ„å»ºå¤šèŠ‚ç‚¹ VM é›†ç¾¤ã€éƒ¨ç½² NFSï¼Œå¹¶æµ‹è¯• ArgoCDã€Prometheus ç­‰ç»„ä»¶ã€‚â€

### â˜ï¸ äº‘å¹³å°ç”¨æˆ·ï¼ˆè¿›é˜¶ï¼‰

> â€œæˆ‘å¸Œæœ›å°†æœ¬åœ°ç¯å¢ƒè¿ç§»åˆ°äº‘ç«¯æµ‹è¯•ï¼Œæœ€å¥½èƒ½ä¸€é”®ç”¨ Terraform åˆ›å»ºä¸€å° Azure VM æˆ–é˜¿é‡Œäº‘è½»é‡æœåŠ¡å™¨ï¼Œå¹¶éƒ¨ç½²å¥½ç¯å¢ƒã€‚â€

---

## äº”ã€åŠŸèƒ½æ¨¡å—

| æ¨¡å—ç¼–å· | æ¨¡å—åç§°          | æè¿°                                                               |
| ---- | ------------- | ---------------------------------------------------------------- |
| M1   | æœ¬åœ° Kind å•èŠ‚ç‚¹ç¯å¢ƒ | ä½¿ç”¨ Docker + Kind å¿«é€Ÿéƒ¨ç½²å•èŠ‚ç‚¹ Kubernetes å®éªŒé›†ç¾¤ï¼Œé…ç½® PVCï¼ˆNFSï¼‰             |
| M2   | å¤šèŠ‚ç‚¹è™šæ‹Ÿæœºç¯å¢ƒ      | ä½¿ç”¨ Vagrant + VirtualBox åˆ›å»º VM é›†ç¾¤ï¼Œé€šè¿‡ Kubeadm + Terraform è‡ªåŠ¨åŒ–éƒ¨ç½²    |
| M3   | ç¯å¢ƒé…ç½®åŒæ­¥        | ä½¿ç”¨ GitHub + chezmoi / devbox / .tool-versions ç®¡ç†å¼€å‘å·¥å…·ä¸ shell ç¯å¢ƒé…ç½® |
| M4   | æ‰©å±•åº”ç”¨å®éªŒæ¨¡å—      | é›†æˆ ArgoCDã€Prometheusã€Nginx Ingressã€Kubernetes Dashboard ç­‰ç»„ä»¶      |
| M5   | äº‘ç«¯éƒ¨ç½²æ¨¡å—ï¼ˆAzureï¼‰ | ä½¿ç”¨ Terraform åˆ›å»º Azure Ubuntu è™šæ‹Ÿæœºï¼Œè‡ªåŠ¨å®‰è£… K8s/NFS/æµ‹è¯•ç¯å¢ƒ               |
| M6   | äº‘ç«¯éƒ¨ç½²æ¨¡å—ï¼ˆé˜¿é‡Œäº‘ï¼‰   | ä½¿ç”¨ Terraform åˆ›å»ºé˜¿é‡Œäº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼Œéƒ¨ç½²è½»é‡çº§å®éªŒç¯å¢ƒï¼ˆå¦‚ K3sï¼‰                       |
| M7   | é¡¹ç›®ç»“æ„æ ‡å‡†åŒ–ä¸æ–‡æ¡£    | æ ‡å‡† GitHub ä»“åº“ç»“æ„ã€è„šæœ¬æ¨¡æ¿ã€è‡ªåŠ¨åŒ–éƒ¨ç½²æ–‡æ¡£ã€æ•™å­¦æ¨¡æ¿æ”¯æŒ                               |

---

## å…­ã€æŠ€æœ¯é€‰å‹

| ç±»åˆ«     | æŠ€æœ¯                            | ç†ç”±                             |
| ------ | ----------------------------- | ------------------------------ |
| åŸºç¡€è®¾æ–½ç®¡ç† | Terraform                     | æœ€ä¸»æµçš„ IaC å·¥å…·ï¼Œæ”¯æŒå¤šäº‘ï¼ˆæœ¬åœ°/é˜¿é‡Œäº‘/Azureï¼‰ |
| è™šæ‹ŸåŒ–å¹³å°  | Vagrant + VirtualBox / VMware | å¿«é€Ÿåˆ›å»ºå¤šèŠ‚ç‚¹ VMï¼Œè·¨å¹³å°å¯ç”¨               |
| å®¹å™¨é›†ç¾¤ç®¡ç† | Kind + Kubeadm                | å¿«é€Ÿå…¥é—¨ Kubernetes å¹¶æ”¯æŒè¿›é˜¶éƒ¨ç½²        |
| æŒä¹…åŒ–å­˜å‚¨  | NFS                           | æ¨¡æ‹ŸçœŸå®åœºæ™¯ä¸­çš„ PVC ä½¿ç”¨                |
| é…ç½®åŒæ­¥å·¥å…· | GitHub + chezmoi              | ç®¡ç† dotfiles å’Œç¯å¢ƒé…ç½®ï¼Œè·¨å¹³å°ä¸€è‡´        |
| äº‘å¹³å°    | Azure / é˜¿é‡Œäº‘                   | æ”¯æŒä½¿ç”¨ Terraform API éƒ¨ç½²å®éªŒè™šæ‹Ÿæœº     |

---

## ä¸ƒã€å¹³å°å…¼å®¹æ€§

| åŠŸèƒ½æ¨¡å—            | macOS | Windowsï¼ˆå« WSLï¼‰ | Linux | Azure | é˜¿é‡Œäº‘ |
| --------------- | ----- | -------------- | ----- | ----- | --- |
| Terraform éƒ¨ç½²    | âœ…     | âœ…              | âœ…     | âœ…     | âœ…   |
| Kind éƒ¨ç½²         | âœ…     | âœ…              | âœ…     | âŒ     | âŒ   |
| Vagrant è™šæ‹Ÿæœº     | âœ…     | âœ…              | âœ…     | âŒ     | âŒ   |
| äº‘è™šæ‹Ÿæœºï¼ˆTerraformï¼‰ | -     | -              | -     | âœ…     | âœ…   |
| ç¯å¢ƒé…ç½®åŒæ­¥          | âœ…     | âœ…              | âœ…     | -     | -   |

---

## å…«ã€ç›®å½•ç»“æ„å»ºè®®

```bash
iac-lab/
â”œâ”€â”€ README.md
â”œâ”€â”€ iac-lab/                          # IaC å­¦ä¹ æ–‡æ¡£ä¸æ¨¡æ¿
â”‚   â”œâ”€â”€ æé—®æ¨¡æ¿.md
â”‚   â”œâ”€â”€ Kubernetes + NFS æŠ¥å‘Š.md
â”‚   â””â”€â”€ æ¨èæ–¹æ¡ˆè¯´æ˜.md
â”œâ”€â”€ k8s-kind-nfs-terraform/          # åˆå­¦è€…å®éªŒé¡¹ç›®
â”‚   â”œâ”€â”€ terraform/
â”‚   â”œâ”€â”€ kind-config.yaml
â”‚   â”œâ”€â”€ nfs-deploy.yaml
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ k8s-vagrant-terraform-nfs/       # å¤šèŠ‚ç‚¹å®æˆ˜é¡¹ç›®
â”‚   â”œâ”€â”€ Vagrantfile
â”‚   â”œâ”€â”€ terraform/
â”‚   â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ cloud-azure-terraform/           # Azure äº‘ç«¯è™šæ‹Ÿæœºé¡¹ç›®
â”‚   â”œâ”€â”€ main.tf
â”‚   â”œâ”€â”€ cloud-init.sh
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ cloud-alicloud-terraform/        # é˜¿é‡Œäº‘è½»é‡æœåŠ¡å™¨é¡¹ç›®
â”‚   â”œâ”€â”€ main.tf
â”‚   â”œâ”€â”€ install.sh
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ .devcontainer/                   # VSCode è¿œç¨‹å¼€å‘æ”¯æŒ
â”œâ”€â”€ .github/workflows/               # GitHub Actions è‡ªåŠ¨åŒ–
â”œâ”€â”€ .tool-versions                   # å¤šè¯­è¨€ç‰ˆæœ¬æ§åˆ¶ï¼ˆASDFï¼‰
â””â”€â”€ Makefile                         # å¿«é€Ÿéƒ¨ç½²è„šæœ¬å…¥å£
```

---

## ä¹ã€å¼€å‘è®¡åˆ’ä¸ç‰ˆæœ¬è¿­ä»£

| æ—¶é—´      | ç‰ˆæœ¬   | åŠŸèƒ½ç‚¹                                   |
| ------- | ---- | ------------------------------------- |
| 2025-06 | v0.1 | Kind + Terraform + NFS æœ¬åœ°å•èŠ‚ç‚¹ç¯å¢ƒ        |
| 2025-07 | v0.2 | Vagrant å¤šèŠ‚ç‚¹éƒ¨ç½²é›†ç¾¤ç¯å¢ƒ                     |
| 2025-08 | v0.3 | æ‰©å±• ArgoCD / Prometheus / Dashboard æ¨¡å— |
| 2025-09 | v0.4 | ç¯å¢ƒé…ç½®åŒæ­¥ã€.tool-versions ç®¡ç†ã€æœ¬åœ° dotfiles  |
| 2025-10 | v0.5 | Azure è™šæ‹Ÿæœºéƒ¨ç½² + å®‰è£…ç¯å¢ƒè„šæœ¬                  |
| 2025-11 | v0.6 | é˜¿é‡Œäº‘è½»é‡æœåŠ¡å™¨éƒ¨ç½² + å®éªŒé›†ç¾¤                     |
| 2025-12 | v1.0 | æ–‡æ¡£å®Œå–„ã€ç»“æ„ä¼˜åŒ–ã€å¼€æºå‘å¸ƒ                        |

---

## åã€å‚è€ƒèµ„æºä¸å·¥å…·

* [Terraform å®˜ç½‘](https://www.terraform.io/)
* [Kind é¡¹ç›®](https://kind.sigs.k8s.io/)
* [Vagrant å®˜æ–¹æ–‡æ¡£](https://developer.hashicorp.com/vagrant)
* [Azure Terraform Provider](https://registry.terraform.io/providers/hashicorp/azurerm/latest)
* [é˜¿é‡Œäº‘ Terraform Provider](https://registry.terraform.io/providers/aliyun/alicloud/latest)
* [Kubernetes å®˜æ–¹æ–‡æ¡£](https://kubernetes.io/zh-cn/)

---

âœ… å¦‚æœä½ éœ€è¦ï¼Œæˆ‘è¿˜å¯ä»¥ï¼š

* è‡ªåŠ¨ç”Ÿæˆ `cloud-azure-terraform/` å’Œ `cloud-alicloud-terraform/` æ¨¡å—ï¼›
* æ•´ç†å®Œæ•´çš„ GitHub é¡¹ç›®åˆå§‹æ¨¡æ¿ï¼ˆå« Makefileã€å®‰è£…è„šæœ¬ï¼‰ï¼›
* æä¾› VS Code + Devcontainer é…ç½®æ–‡ä»¶ï¼Œå®ç°äº‘ç«¯æˆ–è¿œç¨‹å¼€å‘ä½“éªŒï¼›

åªéœ€å›å¤â€œâœ…å¼€å§‹ç”Ÿæˆç»“æ„â€ï¼Œæˆ‘å°†ç«‹å³å¸®ä½ æ„å»ºå¼€æºé¡¹ç›®éª¨æ¶ã€‚
